<!-- Aqui começa o código inserido -->
<div class="container mt-4">
    <h1>Avisos</h1>
    <div id="provas-container" class="table-responsive" style="max-height: 600px; overflow-y: auto;">
        <!-- A tabela será preenchida dinamicamente -->
        <table class="table table-striped">
            <thead>
            <tr>
                <th>Título</th>
                <th style="width: 100ch;">Descrição</th>
                <th>Tipo</th> <!-- Tipo vem antes -->
                <th>Data</th> <!-- Data vem depois -->
            </tr>
            </thead>
            <tbody id="provas-body">
            <!-- Aqui as provas serão inseridas dinamicamente -->
            </tbody>
        </table>
    </div>
</div>

<!-- Adicionando os scripts para WebSocket -->
<script src="https://cdn.jsdelivr.net/npm/sockjs-client@1.5.1/dist/sockjs.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>

<script>
    function exibirAviso({titulo, descricao, data, tipo}) {
        const row = document.createElement('tr');
        row.innerHTML = `<td>${titulo}</td><td>${descricao}</td><td>${tipo}</td><td>${data}</td>`;
        document.getElementById('provas-body').appendChild(row);
    }


    function carregarProvas() {
    $.ajax({
        url: '/buscarProvasJson',
        method: 'GET',
        success: function(data) {
            const provasBody = document.getElementById('provas-body');
            provasBody.innerHTML = '';  // Limpar antes de inserir novos dados

            // Ordenar as provas pela data mais próxima
            data.sort((a, b) => new Date(a.data) - new Date(b.data));

            // Exibir cada prova, já ordenada
            data.forEach(prova => exibirAviso(prova));
        },
        error: function(error) {
            console.error('Erro ao carregar as provas:', error);
        }
    });
}

</script>

<!-- Fim do código inserido -->
</div>
